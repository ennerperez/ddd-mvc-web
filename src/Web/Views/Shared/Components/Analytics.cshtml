@using Microsoft.Extensions.Hosting
@inject IConfiguration Configuration
@inject IHostEnvironment Environment

@if (!Environment.IsDevelopment())
{
    var gtag = Configuration["AppSettings:GATrackingCode"];
    if (!string.IsNullOrWhiteSpace(gtag))
    {
        using (Html.BeginScripts())
        {
            <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=@gtag"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', '@gtag');
        </script>
        }
    }
}